<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Inscripciones</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h1 th:text="'Inscripciones de: ' + ${eleccion.nombre}"></h1>

<hr>

<h3>Inscribir candidato</h3>

<form th:action="@{/inscripciones}" th:object="${inscribir}" method="post" class="row g-3">

    <input type="hidden" th:field="*{eleccionId}" th:value="${eleccion.id}"/>

    <div class="col-md-6">
        <label>Candidato</label>
        <select class="form-select" th:field="*{candidatoId}" required>
            <option value="">-- Seleccione --</option>
            <option th:each="c : ${candidatos}"
                    th:value="${c.id}"
                    th:text="${c.nombre + ' (' + c.documento + ')' }">
            </option>
        </select>
    </div>

    <div class="col-md-3">
        <label>Número en el tarjetón</label>
        <input type="number" th:field="*{numeroTarjeton}" class="form-control">
    </div>

    <div class="col-md-2 mt-4">
        <button class="btn btn-success">Agregar</button>
    </div>

</form>

<hr>

<h3>Candidatos inscritos</h3>

<table class="table table-striped">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Candidato</th>
        <th>Documento</th>
        <th>Tarjetón</th>
        <th>Estado</th>
        <th>Acciones</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="i : ${lista}">
        <td th:text="${i.id}"></td>
        <td th:text="${i.candidatoNombre}"></td>
        <td th:text="${i.candidatoDocumento}"></td>
        <td th:text="${i.numeroTarjeton}"></td>

        <td>
            <span class="badge bg-warning" th:if="${i.estado == 'PENDIENTE'}">Pendiente</span>
            <span class="badge bg-success" th:if="${i.estado == 'APROBADO'}">Aprobado</span>
            <span class="badge bg-danger" th:if="${i.estado == 'RECHAZADO'}">Rechazado</span>
        </td>

        <td>
            <a th:href="@{|/inscripciones/${eleccion.id}/aprobar/${i.id}|}"
               class="btn btn-success btn-sm">Aprobar</a>

            <a th:href="@{|/inscripciones/${eleccion.id}/rechazar/${i.id}|}"
               class="btn btn-warning btn-sm">Rechazar</a>

            <a th:href="@{|/inscripciones/${eleccion.id}/eliminar/${i.id}|}"
               class="btn btn-danger btn-sm"
               onclick="return confirm('¿Seguro?');">Eliminar</a>
        </td>
    </tr>
    </tbody>
</table>

<a th:href="@{/elecciones}" class="btn btn-secondary mt-3">Volver</a>

</body>
</html>
