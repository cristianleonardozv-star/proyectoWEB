<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Votaci√≥n</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h1 th:text="${eleccion.nombre}"></h1>

<p><strong>Estado real de la elecci√≥n:</strong>
    <span style="color:red;" th:text="${eleccion.estado}"></span>
</p>

<p><strong>Periodo:</strong>
    <span th:text="${eleccion.fechaInicio}"></span> -
    <span th:text="${eleccion.fechaFin}"></span>
</p>

<!-- üîç DEBUG PARA VERIFICAR QUE LLEGA EL ID -->
<pre class="alert alert-warning">
DEBUG:
ELECCION ID RECIBIDO: [[${eleccion.id}]]
</pre>

<!-- MENSAJE -->
<div class="alert alert-info" th:if="${mensaje}" th:text="${mensaje}"></div>

<!-- FORMULARIO -->
<form th:action="@{/votar}" method="post">

    <!-- üî• Hidden corregido -->
    <input type="hidden" name="eleccionId" th:value="${eleccion.id}" />

    <div class="row">
        <div class="col-md-4" th:each="c : ${candidatos}">
            <div class="card mb-3">
                <div class="card-body">

                    <h5 class="card-title" th:text="${c.candidatoNombre}"></h5>

                    <p><strong>Documento:</strong>
                        <span th:text="${c.candidatoDocumento}"></span>
                    </p>

                    <p><strong>Tarjet√≥n:</strong>
                        <span th:text="${c.numeroTarjeton}"></span>
                    </p>

                    <!-- üî• Radio correcto (env√≠a el ID DE INSCRIPCI√ìN) -->
                    <input type="radio"
                           name="candidatoId"
                           th:value="${c.id}"
                           required> Seleccionar

                </div>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label><strong>Documento del votante</strong></label>
        <input type="text"
               name="votanteId"
               class="form-control"
               placeholder="Ingresa el documento"
               required />
    </div>

    <button class="btn btn-success">Registrar voto</button>
</form>

</body>
</html>
